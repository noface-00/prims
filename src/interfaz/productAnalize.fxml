<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane style="-fx-background-color: white;" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="interfaz.controllers.ProductAnalysisController">

    <!-- ============================= -->
    <!--           CABECERA            -->
    <!-- ============================= -->
    <top>
        <BorderPane fx:id="togleAnalys" onMouseClicked="#onClicked">
            <padding>
                <Insets bottom="10" left="10" right="10" top="10" />
            </padding>

            <!-- Imagen product -->
            <left>
                <ImageView fx:id="productImage" fitHeight="150" fitWidth="140" preserveRatio="true">
                    <BorderPane.margin><Insets right="10" /></BorderPane.margin>
                </ImageView>
            </left>

            <!-- Información principal -->
            <center>
                <VBox alignment="CENTER_LEFT" spacing="10">
                    <Text fx:id="lblTitle" style="-fx-font-family: 'Poppins SemiBold'; -fx-font-size: 16;" text="Título del Producto" />

                    <TextFlow fx:id="flowPrecio" style="-fx-background-color: #FFFFFF;                                      -fx-padding: 8;                                      -fx-background-radius: 6;">
                        <Text fx:id="txtPrecioActual" style="-fx-font-family:'Poppins SemiBold';                                      -fx-fill:black;                                      -fx-font-size:14;" text="Precio actual: --" />

                        <Text fx:id="txtPromedio" style="-fx-font-family:'Poppins SemiBold';                                      -fx-fill:#555;" />

                        <Text fx:id="txtDiferencia" style="-fx-font-family:'Poppins SemiBold';                                      -fx-fill:#888;" />
                    </TextFlow>
                </VBox>
            </center>

            <!-- Botones a la derecha -->
            <right>
                <VBox alignment="CENTER" spacing="16">
                    <Button fx:id="btndelWishlist" onAction="#onDeletedWish" prefWidth="200" style="-fx-background-color:black; -fx-text-fill:white;" text="Quitar de favoritos">
                        <font><Font name="Poppins SemiBold" size="13" /></font>
                    </Button>

                    <Button fx:id="btnProduct" onAction="#visitURL" prefWidth="200" style="-fx-background-color:black; -fx-text-fill:white;" text="Visitar Producto">
                        <font><Font name="Poppins SemiBold" size="13" /></font>
                    </Button>

                    <Button fx:id="btnReport" onAction="#onReportGenerated" prefWidth="200" style="-fx-background-color:black; -fx-text-fill:white;" text="Generar Reporte">
                        <font><Font name="Poppins SemiBold" size="13" /></font>
                    </Button>
                </VBox>
            </right>
        </BorderPane>
    </top>

    <!-- ============================= -->
    <!--       CONTENIDO EXPANDIBLE    -->
    <!-- ============================= -->
    <center>
        <VBox fx:id="content" maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" spacing="20" visible="false" managed="false" BorderPane.alignment="TOP_CENTER">
            <padding>
                <Insets bottom="20" left="10" right="10" top="10" />
            </padding>

            <!-- Información del vendedor -->
            <VBox spacing="6">
                <Label style="-fx-font-family: 'Poppins SemiBold'; -fx-font-size: 16;" text="Información del Vendedor" />

                <TextFlow fx:id="flowVendedor" style="-fx-background-color:#ffffff;                                  -fx-padding:10;                                  -fx-background-radius:6;">
                    <Text fx:id="txtVendedorNombre" style="-fx-font-family:'Poppins Light';                                  -fx-fill:#222;                                  -fx-font-size:13;" />

                    <Text fx:id="txtFeedback" style="-fx-font-family:'Poppins Light';                                  -fx-fill:#000;                                  -fx-font-size:13;" />

                    <Text fx:id="txtFeedbackScore" style="-fx-font-family:'Poppins Light';                                  -fx-fill:black;                                  -fx-font-size:13;" />

                    <Text fx:id="txtAntiguedad" style="-fx-font-family:'Poppins Light';                                  -fx-fill:black;                                  -fx-font-size:13;" />

                    <Text fx:id="txtTrustScore" style="-fx-font-family:'Poppins Light';                                  -fx-fill:black;                                  -fx-font-size:13;" />
                </TextFlow>
            </VBox>

            <!-- Precios similares -->
            <VBox spacing="10">

                <Label style="-fx-font-family: 'Poppins SemiBold'; -fx-font-size: 16;" text="Mejores precios de productos similares" />

                <TextFlow>
                    <Text fx:id="txtTopVariacionesPositivas" style="-fx-font-family:'Poppins Light';                                  -fx-fill:#000;                                  -fx-font-size:13;" />
                </TextFlow>

                <Label style="-fx-font-family: 'Poppins SemiBold'; -fx-font-size: 16;" text="Peores precios de productos similares" />

                <TextFlow>
                    <Text fx:id="txtTopVariacionesNegativas" style="-fx-font-family:'Poppins Light';                                  -fx-fill:#000;                                  -fx-font-size:13;" />
                </TextFlow>

                <Label style="-fx-font-family: 'Poppins SemiBold'; -fx-font-size: 16;" text="Análisis de Precio" />

                <TextFlow fx:id="flowAnalisis" style="-fx-background-color:#ffffff;                                  -fx-padding:10;                                  -fx-background-radius:6;">
                    <Text fx:id="txtPromedioMercado" style="-fx-font-family:'Poppins Light'; -fx-fill:black;" />

                    <Text fx:id="txtRango" style="-fx-font-family:'Poppins Light'; -fx-fill:black;" />

                    <Text fx:id="txtEstabilidad" style="-fx-font-family:'Poppins Light'; -fx-fill:black;" />

                    <Text fx:id="txtTotalProductos" style="-fx-font-family:'Poppins Light'; -fx-fill:black;" />

                    <Text fx:id="txtPromedioVariacionGeneral" style="-fx-font-family:'Poppins Light'; -fx-fill:black;" />

                    <Text fx:id="txtResumenConsultasDiarias" style="-fx-font-family:'Poppins Light'; -fx-fill:black;" />
                </TextFlow>
            </VBox>

            <!-- Historial -->
            <VBox spacing="6">
                <Label style="-fx-font-family: 'Poppins SemiBold'; -fx-font-size: 16;" text="Historial de Precio" />

                <LineChart fx:id="chartHistorial" animated="false" legendVisible="false">
                    <xAxis><CategoryAxis fx:id="xAxis" /></xAxis>
                    <yAxis><NumberAxis fx:id="yAxis" label="Precio (USD)" /></yAxis>
                </LineChart>
            </VBox>

        </VBox>
    </center>

</BorderPane>
